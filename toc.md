# Table Of Contents

## [1 Preface](#1-preface)
  - [1.1 Multitasking in Small Embedded Systems](#11-multitasking-in-small-embedded-systems)
    - [1.1.1 About the FreeRTOS Kernel](#111-about-the-freertos-kernel)
    - [1.1.2 Value Proposition](#112-value-proposition)
    - [1.1.3 A Note About Terminology](#113-a-note-about-terminology)
    - [1.1.4 Why Use an RTOS?](#114-why-use-an-rtos)
    - [1.1.5 FreeRTOS Kernel Features](#115-freertos-kernel-features)
    - [1.1.6 Licensing, and The FreeRTOS, OpenRTOS, and SafeRTOS Family](#116-licensing-and-the-freertos-openrtos-and-safertos-family)
  - [1.2 Included Source Files and Projects](#12-included-source-files-and-projects)
    - [1.2.1 Obtaining the Examples that Accompany this Book](#121-obtaining-the-examples-that-accompany-this-book)
## [2 The FreeRTOS Kernel Distribution](#2-the-freertos-kernel-distribution)
  - [2.1 Introduction](#21-introduction)
  - [2.2 Understanding the FreeRTOS Distribution](#22-understanding-the-freertos-distribution)
    - [2.2.1 Definition: FreeRTOS Port](#221-definition-freertos-port)
    - [2.2.2 Building FreeRTOS](#222-building-freertos)
    - [2.2.3 FreeRTOSConfig.h](#223-freertosconfigh)
    - [2.2.4 Official Distributions](#224-official-distributions)
    - [2.2.6 FreeRTOS Source Files Common to All Ports](#226-freertos-source-files-common-to-all-ports)
    - [2.2.7 FreeRTOS Source Files Specific to a Port](#227-freertos-source-files-specific-to-a-port)
    - [2.2.8 Include Paths](#228-include-paths)
    - [2.2.9 Header Files](#229-header-files)
  - [2.3 Demo Applications](#23-demo-applications)
  - [2.4 Creating a FreeRTOS Project](#24-creating-a-freertos-project)
    - [2.4.1 Adapting One of the Supplied Demo Projects](#241-adapting-one-of-the-supplied-demo-projects)
    - [2.4.2 Creating a New Project from Scratch](#242-creating-a-new-project-from-scratch)
  - [2.5 Data Types and Coding Style Guide](#25-data-types-and-coding-style-guide)
    - [2.5.1 Data Types](#251-data-types)
    - [2.5.2 Variable Names](#252-variable-names)
    - [2.5.3 Function Names](#253-function-names)
    - [2.5.4 Formatting](#254-formatting)
    - [2.5.5 Macro Names](#255-macro-names)
    - [2.5.6 Rationale for Excessive Type Casting](#256-rationale-for-excessive-type-casting)
## [3 Heap Memory Management](#3-heap-memory-management)
  - [3.1 Introduction](#31-introduction)
    - [3.1.1 Prerequisites](#311-prerequisites)
    - [3.1.2 Scope](#312-scope)
    - [3.1.3 Switching Between Static and Dynamic Memory Allocation](#313-switching-between-static-and-dynamic-memory-allocation)
    - [3.1.4 Using Dynamic Memory Allocation](#314-using-dynamic-memory-allocation)
    - [3.1.5 Options for Dynamic Memory Allocation](#315-options-for-dynamic-memory-allocation)
  - [3.2 Example Memory Allocation Schemes](#32-example-memory-allocation-schemes)
    - [3.2.1 Heap\_1](#321-heap_1)
    - [3.2.2 Heap\_2](#322-heap_2)
    - [3.2.3 Heap\_3](#323-heap_3)
    - [3.2.4 Heap\_4](#324-heap_4)
    - [3.2.5 Heap\_5](#325-heap_5)
    - [3.2.6 Initialising heap\_5: The vPortDefineHeapRegions() API Function](#326-initialising-heap_5-the-vportdefineheapregions-api-function)
  - [3.3 Heap Related Utility Functions and Macros](#33-heap-related-utility-functions-and-macros)
    - [3.3.1 Defining the Heap Start Address](#331-defining-the-heap-start-address)
    - [3.3.2 The xPortGetFreeHeapSize() API Function](#332-the-xportgetfreeheapsize-api-function)
    - [3.3.3 The xPortGetMinimumEverFreeHeapSize() API Function](#333-the-xportgetminimumeverfreeheapsize-api-function)
    - [3.3.4 The vPortGetHeapStats() API Function](#334-the-vportgetheapstats-api-function)
    - [3.3.5 Collecting Per-task Heap Usage Statistics](#335-collecting-per-task-heap-usage-statistics)
    - [3.3.6 Malloc Failed Hook Functions](#336-malloc-failed-hook-functions)
    - [3.3.7 Placing Task Stacks in Fast Memory](#337-placing-task-stacks-in-fast-memory)
  - [3.4 Using Static Memory Allocation](#34-using-static-memory-allocation)
    - [3.4.1 Enabling Static Memory Allocation](#341-enabling-static-memory-allocation)
    - [3.4.2 Static Internal Kernel Memory](#342-static-internal-kernel-memory)
      - [3.4.2.1 vApplicationGetTimerTaskMemory](#3421-vapplicationgettimertaskmemory)
      - [3.4.2.2 vApplicationGetIdleTaskMemory](#3422-vapplicationgetidletaskmemory)
## [4 Task Management](#4-task-management)
  - [4.1 Introduction](#41-introduction)
    - [4.1.1 Scope](#411-scope)
  - [4.2 Task Functions](#42-task-functions)
  - [4.3 Top Level Task States](#43-top-level-task-states)
  - [4.4 Task Creation](#44-task-creation)
    - [4.4.1 The xTaskCreate() API Function](#441-the-xtaskcreate-api-function)
    - [4.5.1 Example 4.1. Creating tasks](#451-example-41-creating-tasks)
    - [4.5.2 Example 4.2. Using the task parameter](#452-example-42-using-the-task-parameter)
  - [4.6 Task Priorities](#46-task-priorities)
    - [Generic Scheduler](#generic-scheduler)
    - [Architecture-Optimized Scheduler](#architecture-optimized-scheduler)
  - [4.7 Time Measurement and the Tick Interrupt](#47-time-measurement-and-the-tick-interrupt)
    - [4.7.1 Example 4.3. Experimenting with priorities](#471-example-43-experimenting-with-priorities)
  - [4.8 Expanding the *Not Running* State](#48-expanding-the-not-running-state)
    - [4.8.1 The *Blocked* State](#481-the-blocked-state)
    - [4.8.2 The *Suspended* State](#482-the-suspended-state)
    - [4.8.3 The Ready State](#483-the-ready-state)
    - [4.8.4 Completing the State Transition Diagram](#484-completing-the-state-transition-diagram)
    - [4.8.5 Example 4.4. Using the *Blocked* state to create a delay](#485-example-44-using-the-blocked-state-to-create-a-delay)
    - [4.8.6 The vTaskDelayUntil() API Function](#486-the-vtaskdelayuntil-api-function)
    - [4.8.7 Example 4.5. Converting the example tasks to use vTaskDelayUntil()](#487-example-45-converting-the-example-tasks-to-use-vtaskdelayuntil)
    - [4.8.8 Example 4.6. Combining blocking and non-blocking tasks](#488-example-46-combining-blocking-and-non-blocking-tasks)
  - [4.9 The Idle Task and the Idle Task Hook](#49-the-idle-task-and-the-idle-task-hook)
    - [4.9.1 Idle Task Hook Functions](#491-idle-task-hook-functions)
    - [4.9.2 Limitations on the Implementation of Idle Task Hook Functions](#492-limitations-on-the-implementation-of-idle-task-hook-functions)
    - [4.9.3 Example 4.7. Defining an idle task hook function](#493-example-47-defining-an-idle-task-hook-function)
  - [4.10 Changing the Priority of a Task](#410-changing-the-priority-of-a-task)
    - [4.10.1 The vTaskPrioritySet() API Function](#4101-the-vtaskpriorityset-api-function)
    - [4.10.2 The uxTaskPriorityGet() API Function](#4102-the-uxtaskpriorityget-api-function)
    - [4.10.3 Example 4.8. Changing task priorities](#4103-example-48-changing-task-priorities)
  - [4.11 Deleting a Task](#411-deleting-a-task)
    - [4.11.1 The vTaskDelete() API Function](#4111-the-vtaskdelete-api-function)
    - [4.11.2 Example 4.9. Deleting tasks](#4112-example-49-deleting-tasks)
  - [4.12 Thread Local Storage and Reentrancy](#412-thread-local-storage-and-reentrancy)
    - [4.12.1 C Runtime Thread Local Storage Implementations](#4121-c-runtime-thread-local-storage-implementations)
    - [4.12.2 Custom C Runtime Thread Local Storage](#4122-custom-c-runtime-thread-local-storage)
    - [4.12.3 Application Thread Local Storage](#4123-application-thread-local-storage)
  - [4.13 Scheduling Algorithms](#413-scheduling-algorithms)
    - [4.13.1 A Recap of Task States and Events](#4131-a-recap-of-task-states-and-events)
    - [4.13.2 Selecting the Scheduling Algorithm](#4132-selecting-the-scheduling-algorithm)
    - [4.13.3 Prioritized Preemptive Scheduling with Time Slicing](#4133-prioritized-preemptive-scheduling-with-time-slicing)
    - [4.13.4 Prioritized Preemptive Scheduling without Time Slicing](#4134-prioritized-preemptive-scheduling-without-time-slicing)
    - [4.13.5 Cooperative Scheduling](#4135-cooperative-scheduling)
## [5 Queue Management](#5-queue-management)
  - [5.1 Introduction](#51-introduction)
    - [5.1.1 Scope](#511-scope)
  - [5.2 Characteristics of a Queue](#52-characteristics-of-a-queue)
    - [5.2.1 Data Storage](#521-data-storage)
    - [5.2.2 Access by Multiple Tasks](#522-access-by-multiple-tasks)
    - [5.2.3 Blocking on Queue Reads](#523-blocking-on-queue-reads)
    - [5.2.4 Blocking on Queue Writes](#524-blocking-on-queue-writes)
    - [5.2.5 Blocking on Multiple Queues](#525-blocking-on-multiple-queues)
    - [5.2.6 Creating Queues: Statically Allocated and Dynamically Allocated Queues](#526-creating-queues-statically-allocated-and-dynamically-allocated-queues)
  - [5.3 Using a Queue](#53-using-a-queue)
    - [5.3.1 The xQueueCreate() API Function](#531-the-xqueuecreate-api-function)
    - [5.3.2 The xQueueSendToBack() and xQueueSendToFront() API Functions](#532-the-xqueuesendtoback-and-xqueuesendtofront-api-functions)
    - [5.3.3 The xQueueReceive() API Function](#533-the-xqueuereceive-api-function)
    - [5.3.4 The uxQueueMessagesWaiting() API Function](#534-the-uxqueuemessageswaiting-api-function)
    - [5.3.5 Example 5.1. Blocking when receiving from a queue](#535-example-51-blocking-when-receiving-from-a-queue)
  - [5.4 Receiving Data From Multiple Sources](#54-receiving-data-from-multiple-sources)
    - [5.4.1 Example 5.2: Blocking when sending to a queue, and sending structures on a queue](#541-example-52-blocking-when-sending-to-a-queue-and-sending-structures-on-a-queue)
  - [5.5 Working with Large or Variable Sized Data](#55-working-with-large-or-variable-sized-data)
    - [5.5.1 Queuing Pointers](#551-queuing-pointers)
    - [5.5.2 Using a Queue to Send Different Types and Lengths of Data\[^9\]](#552-using-a-queue-to-send-different-types-and-lengths-of-data9)
  - [5.6 Receiving From Multiple Queues](#56-receiving-from-multiple-queues)
    - [5.6.1 Queue Sets](#561-queue-sets)
    - [5.6.2 The xQueueCreateSet() API Function](#562-the-xqueuecreateset-api-function)
    - [5.6.3 The xQueueAddToSet() API Function](#563-the-xqueueaddtoset-api-function)
    - [5.6.4 The xQueueSelectFromSet() API Function](#564-the-xqueueselectfromset-api-function)
    - [5.6.5 Example 5.3. Using a Queue Set](#565-example-53-using-a-queue-set)
    - [5.6.6 More Realistic Queue Set Use Cases](#566-more-realistic-queue-set-use-cases)
  - [5.7 Using a Queue to Create a Mailbox](#57-using-a-queue-to-create-a-mailbox)
    - [5.7.1 The xQueueOverwrite() API Function](#571-the-xqueueoverwrite-api-function)
    - [5.7.2 The xQueuePeek() API Function](#572-the-xqueuepeek-api-function)
## [6 Software Timer Management](#6-software-timer-management)
  - [6.1 Chapter Introduction and Scope](#61-chapter-introduction-and-scope)
    - [6.1.1 Scope](#611-scope)
  - [6.2 Software Timer Callback Functions](#62-software-timer-callback-functions)
  - [6.3 Attributes and States of a Software Timer](#63-attributes-and-states-of-a-software-timer)
    - [6.3.1 Period of a Software Timer](#631-period-of-a-software-timer)
    - [6.3.2 One-shot and Auto-reload Timers](#632-one-shot-and-auto-reload-timers)
    - [6.3.3 Software Timer States](#633-software-timer-states)
  - [6.4 The Context of a Software Timer](#64-the-context-of-a-software-timer)
    - [6.4.1 The RTOS Daemon (Timer Service) Task](#641-the-rtos-daemon-timer-service-task)
    - [6.4.2 The Timer Command Queue](#642-the-timer-command-queue)
    - [6.4.3 Daemon Task Scheduling](#643-daemon-task-scheduling)
  - [6.5 Creating and Starting a Software Timer](#65-creating-and-starting-a-software-timer)
    - [6.5.1 The xTimerCreate() API Function](#651-the-xtimercreate-api-function)
    - [6.5.2 The xTimerStart() API Function](#652-the-xtimerstart-api-function)
    - [6.5.3 Example 6.1. Creating one-shot and auto-reload timers](#653-example-61-creating-one-shot-and-auto-reload-timers)
  - [6.6 The Timer ID](#66-the-timer-id)
    - [6.6.1 The vTimerSetTimerID() API Function](#661-the-vtimersettimerid-api-function)
    - [6.6.2 The pvTimerGetTimerID() API Function](#662-the-pvtimergettimerid-api-function)
    - [6.6.3 Example 6.2. Using the callback function parameter and the software timer ID](#663-example-62-using-the-callback-function-parameter-and-the-software-timer-id)
  - [6.7 Changing the Period of a Timer](#67-changing-the-period-of-a-timer)
    - [6.7.1 The xTimerChangePeriod() API Function](#671-the-xtimerchangeperiod-api-function)
  - [6.8 Resetting a Software Timer](#68-resetting-a-software-timer)
    - [6.8.1 The xTimerReset() API Function](#681-the-xtimerreset-api-function)
    - [6.8.2 Example 6.3. Resetting a software timer](#682-example-63-resetting-a-software-timer)
## [7 Interrupt Management](#7-interrupt-management)
  - [7.1 Introduction](#71-introduction)
    - [7.1.1 Events](#711-events)
    - [7.1.2 Scope](#712-scope)
  - [7.2 Using the FreeRTOS API from an ISR](#72-using-the-freertos-api-from-an-isr)
    - [7.2.1 The Interrupt Safe API](#721-the-interrupt-safe-api)
    - [7.2.2 The Benefits of Using a Separate Interrupt Safe API](#722-the-benefits-of-using-a-separate-interrupt-safe-api)
    - [7.2.3 The Disadvantages of Using a Separate, Interrupt Safe API](#723-the-disadvantages-of-using-a-separate-interrupt-safe-api)
    - [7.2.4 The xHigherPriorityTaskWoken Parameter](#724-the-xhigherprioritytaskwoken-parameter)
    - [7.2.5 The portYIELD\_FROM\_ISR() and portEND\_SWITCHING\_ISR() Macros](#725-the-portyield_from_isr-and-portend_switching_isr-macros)
  - [7.3 Deferred Interrupt Processing](#73-deferred-interrupt-processing)
  - [7.4 Binary Semaphores Used for Synchronization](#74-binary-semaphores-used-for-synchronization)
    - [7.4.1 The xSemaphoreCreateBinary() API Function](#741-the-xsemaphorecreatebinary-api-function)
    - [7.4.2 The xSemaphoreTake() API Function](#742-the-xsemaphoretake-api-function)
    - [7.4.3 The xSemaphoreGiveFromISR() API Function](#743-the-xsemaphoregivefromisr-api-function)
    - [7.4.4 Example 7.1. Using a binary semaphore to synchronize a task with an interrupt](#744-example-71-using-a-binary-semaphore-to-synchronize-a-task-with-an-interrupt)
    - [7.4.5 Improving the Implementation of the Task Used in Example 7.1](#745-improving-the-implementation-of-the-task-used-in-example-71)
  - [7.5 Counting Semaphores](#75-counting-semaphores)
    - [7.5.1 The xSemaphoreCreateCounting() API Function](#751-the-xsemaphorecreatecounting-api-function)
    - [7.5.2 Example 7.2. Using a counting semaphore to synchronize a task with an interrupt](#752-example-72-using-a-counting-semaphore-to-synchronize-a-task-with-an-interrupt)
  - [7.6 Deferring Work to the RTOS Daemon Task](#76-deferring-work-to-the-rtos-daemon-task)
    - [7.6.1 The xTimerPendFunctionCallFromISR() API Function](#761-the-xtimerpendfunctioncallfromisr-api-function)
    - [7.6.2 Example 7.3. Centralized deferred interrupt processing](#762-example-73-centralized-deferred-interrupt-processing)
  - [7.7 Using Queues within an Interrupt Service Routine](#77-using-queues-within-an-interrupt-service-routine)
    - [7.7.1 The xQueueSendToFrontFromISR() and xQueueSendToBackFromISR() API Functions](#771-the-xqueuesendtofrontfromisr-and-xqueuesendtobackfromisr-api-functions)
    - [7.7.2 Considerations When Using a Queue From an ISR](#772-considerations-when-using-a-queue-from-an-isr)
    - [7.7.3 Example 7.4. Sending and receiving on a queue from within an interrupt](#773-example-74-sending-and-receiving-on-a-queue-from-within-an-interrupt)
  - [7.8 Interrupt Nesting](#78-interrupt-nesting)
    - [7.8.1 A Note to ARM Cortex-M\[^22\] and ARM GIC Users](#781-a-note-to-arm-cortex-m22-and-arm-gic-users)
## [8 Resource Management](#8-resource-management)
  - [8.1 Chapter Introduction and Scope](#81-chapter-introduction-and-scope)
    - [8.1.1 Mutual Exclusion](#811-mutual-exclusion)
    - [8.1.2 Scope](#812-scope)
  - [8.2 Critical Sections and Suspending the Scheduler](#82-critical-sections-and-suspending-the-scheduler)
    - [8.2.1 Basic Critical Sections](#821-basic-critical-sections)
    - [8.2.2 Suspending (or Locking) the Scheduler](#822-suspending-or-locking-the-scheduler)
    - [8.2.3 The vTaskSuspendAll() API Function](#823-the-vtasksuspendall-api-function)
    - [8.2.4 The xTaskResumeAll() API Function](#824-the-xtaskresumeall-api-function)
  - [8.3 Mutexes (and Binary Semaphores)](#83-mutexes-and-binary-semaphores)
    - [8.3.1 The xSemaphoreCreateMutex() API Function](#831-the-xsemaphorecreatemutex-api-function)
    - [8.3.2 Example 8.1. Rewriting vPrintString() to use a semaphore](#832-example-81-rewriting-vprintstring-to-use-a-semaphore)
    - [8.3.3 Priority Inversion](#833-priority-inversion)
    - [8.3.4 Priority Inheritance](#834-priority-inheritance)
    - [8.3.5 Deadlock (or Deadly Embrace)](#835-deadlock-or-deadly-embrace)
    - [8.3.6 Recursive Mutexes](#836-recursive-mutexes)
    - [8.3.7 Mutexes and Task Scheduling](#837-mutexes-and-task-scheduling)
  - [8.4 Gatekeeper Tasks](#84-gatekeeper-tasks)
    - [8.4.1 Re-writing vPrintString() to use a gatekeeper task](#841-re-writing-vprintstring-to-use-a-gatekeeper-task)
## [9 Event Groups](#9-event-groups)
  - [9.1 Chapter Introduction and Scope](#91-chapter-introduction-and-scope)
    - [9.1.1 Scope](#911-scope)
  - [9.2 Characteristics of an Event Group](#92-characteristics-of-an-event-group)
    - [9.2.1 Event Groups, Event Flags and Event Bits](#921-event-groups-event-flags-and-event-bits)
    - [9.2.2 More About the EventBits\_t Data Type](#922-more-about-the-eventbits_t-data-type)
    - [9.2.3 Access by Multiple Tasks](#923-access-by-multiple-tasks)
    - [9.2.4 A Practical Example of Using an Event Group](#924-a-practical-example-of-using-an-event-group)
  - [9.3 Event Management Using Event Groups](#93-event-management-using-event-groups)
    - [9.3.1 The xEventGroupCreate() API Function](#931-the-xeventgroupcreate-api-function)
    - [9.3.2 The xEventGroupSetBits() API Function](#932-the-xeventgroupsetbits-api-function)
    - [9.3.3 The xEventGroupSetBitsFromISR() API Function](#933-the-xeventgroupsetbitsfromisr-api-function)
    - [9.3.4 The xEventGroupWaitBits() API Function](#934-the-xeventgroupwaitbits-api-function)
    - [9.3.5 The xEventGroupGetStaticBuffer() API Function](#935-the-xeventgroupgetstaticbuffer-api-function)
    - [9.3.6 Example 9.1. Experimenting with event groups](#936-example-91-experimenting-with-event-groups)
  - [9.4 Task Synchronization Using an Event Group](#94-task-synchronization-using-an-event-group)
    - [9.4.1 The xEventGroupSync() API Function](#941-the-xeventgroupsync-api-function)
    - [9.4.2 Example 9.2. Synchronizing tasks](#942-example-92-synchronizing-tasks)
## [10 Task Notifications](#10-task-notifications)
  - [10.1 Introduction](#101-introduction)
    - [10.1.1 Communicating Through Intermediary Objects](#1011-communicating-through-intermediary-objects)
    - [10.1.2 Task Notifications—Direct to Task Communication](#1012-task-notificationsdirect-to-task-communication)
    - [10.1.3 Scope](#1013-scope)
  - [10.2 Task Notifications; Benefits and Limitations](#102-task-notifications-benefits-and-limitations)
    - [10.2.1 Performance Benefits of Task Notifications](#1021-performance-benefits-of-task-notifications)
    - [10.2.2 RAM Footprint Benefits of Task Notifications](#1022-ram-footprint-benefits-of-task-notifications)
    - [10.2.3 Limitations of Task Notifications](#1023-limitations-of-task-notifications)
  - [10.3 Using Task Notifications](#103-using-task-notifications)
    - [10.3.1 Task Notification API Options](#1031-task-notification-api-options)
      - [10.3.1.1 The complete list of API functions 27](#10311-the-complete-list-of-api-functions-27)
    - [10.3.2 The xTaskNotifyGive() API Functions](#1032-the-xtasknotifygive-api-functions)
    - [10.3.3 The vTaskNotifyGiveFromISR() API Function](#1033-the-vtasknotifygivefromisr-api-function)
    - [10.3.4 The ulTaskNotifyTake() API Function](#1034-the-ultasknotifytake-api-function)
    - [10.3.5 Example 10.1. Using a task notification in place of a semaphore, method 1](#1035-example-101-using-a-task-notification-in-place-of-a-semaphore-method-1)
    - [10.3.6 Example 10.2. Using a task notification in place of a semaphore, method 2](#1036-example-102-using-a-task-notification-in-place-of-a-semaphore-method-2)
    - [10.3.7 The xTaskNotify() and xTaskNotifyFromISR() API Functions](#1037-the-xtasknotify-and-xtasknotifyfromisr-api-functions)
    - [10.3.8 The xTaskNotifyWait() API Function](#1038-the-xtasknotifywait-api-function)
    - [10.3.9 Task Notifications Used in Peripheral Device Drivers: UART Example](#1039-task-notifications-used-in-peripheral-device-drivers-uart-example)
    - [10.3.10 Task Notifications Used in Peripheral Device Drivers: ADC Example](#10310-task-notifications-used-in-peripheral-device-drivers-adc-example)
    - [10.3.11 Task Notifications Used Directly Within an Application](#10311-task-notifications-used-directly-within-an-application)
## [11 Low Power Support](#11-low-power-support)
## [12 Developer Support](#12-developer-support)
  - [12.1 Introduction](#121-introduction)
  - [12.2 configASSERT()](#122-configassert)
    - [12.2.1 Example configASSERT() definitions](#1221-example-configassert-definitions)
  - [12.3 Tracealyzer for FreeRTOS](#123-tracealyzer-for-freertos)
  - [12.4 Debug Related Hook (Callback) Functions](#124-debug-related-hook-callback-functions)
    - [12.4.1 Malloc failed hook](#1241-malloc-failed-hook)
  - [12.5 Viewing Run-time and Task State Information](#125-viewing-run-time-and-task-state-information)
    - [12.5.1 Task Run-Time Statistics](#1251-task-run-time-statistics)
    - [12.5.2 The Run-Time Statistics Clock](#1252-the-run-time-statistics-clock)
    - [12.5.3 Configuring an Application to Collect Run-Time Statistics](#1253-configuring-an-application-to-collect-run-time-statistics)
    - [12.5.4 The uxTaskGetSystemState() API Function](#1254-the-uxtaskgetsystemstate-api-function)
    - [12.5.5 The vTaskListTasks() Helper Function](#1255-the-vtasklisttasks-helper-function)
    - [12.5.6 The vTaskGetRunTimeStatistics() Helper Function](#1256-the-vtaskgetruntimestatistics-helper-function)
    - [12.5.7 Generating and Displaying Run-Time Statistics, a Worked Example](#1257-generating-and-displaying-run-time-statistics-a-worked-example)
  - [12.6 Trace Hook Macros](#126-trace-hook-macros)
    - [12.6.1 Available Trace Hook Macros](#1261-available-trace-hook-macros)
    - [12.6.2 Defining Trace Hook Macros](#1262-defining-trace-hook-macros)
    - [12.6.3 FreeRTOS Aware Debugger Plug-ins](#1263-freertos-aware-debugger-plug-ins)
## [13 Troubleshooting](#13-troubleshooting)
  - [13.1 Chapter Introduction and Scope](#131-chapter-introduction-and-scope)
  - [13.2 Interrupt Priorities](#132-interrupt-priorities)
  - [13.3 Stack Overflow](#133-stack-overflow)
    - [13.3.1 The uxTaskGetStackHighWaterMark() API Function](#1331-the-uxtaskgetstackhighwatermark-api-function)
    - [13.3.2 Run Time Stack Checking—Overview](#1332-run-time-stack-checkingoverview)
    - [13.3.3 Run Time Stack Checking—Method 1](#1333-run-time-stack-checkingmethod-1)
    - [13.3.4 Run Time Stack Checking—Method 2](#1334-run-time-stack-checkingmethod-2)
    - [13.3.4 Run Time Stack Checking—Method 3](#1334-run-time-stack-checkingmethod-3)
  - [13.4 Use of printf() and sprintf()](#134-use-of-printf-and-sprintf)
    - [13.4.1 Printf-stdarg.c](#1341-printf-stdargc)
  - [13.5 Other Common Sources of Error](#135-other-common-sources-of-error)
    - [13.5.1 Symptom: Adding a simple task to a demo causes the demo to crash](#1351-symptom-adding-a-simple-task-to-a-demo-causes-the-demo-to-crash)
    - [13.5.2 Symptom: Using an API function within an interrupt causes the application to crash](#1352-symptom-using-an-api-function-within-an-interrupt-causes-the-application-to-crash)
    - [13.5.3 Symptom: Sometimes the application crashes within an interrupt service routine](#1353-symptom-sometimes-the-application-crashes-within-an-interrupt-service-routine)
    - [13.5.4 Symptom: The scheduler crashes when attempting to start the first task](#1354-symptom-the-scheduler-crashes-when-attempting-to-start-the-first-task)
    - [13.5.5 Symptom: Interrupts are unexpectedly left disabled, or critical sections do not nest correctly](#1355-symptom-interrupts-are-unexpectedly-left-disabled-or-critical-sections-do-not-nest-correctly)
    - [13.5.6 Symptom: The application crashes even before the scheduler is started](#1356-symptom-the-application-crashes-even-before-the-scheduler-is-started)
    - [13.5.7 Symptom: Calling API functions while the scheduler is suspended, or from inside a critical section, causes the application to crash](#1357-symptom-calling-api-functions-while-the-scheduler-is-suspended-or-from-inside-a-critical-section-causes-the-application-to-crash)
  - [13.6 Additional Debugging Steps](#136-additional-debugging-steps)
